!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=11)}([function(e,t,n){"use strict";n(1);var r=n(3);n.d(t,"PolylineTrailMaterialProperty",(function(){return r.a}));var i=n(4);n.d(t,"PolylineFlowMaterialProperty",(function(){return i.a}));var o=n(5);n.d(t,"PolylineEmissionMaterialProperty",(function(){return o.a}));var a=n(6);n.d(t,"WaterMaterialProperty",(function(){return a.a}));var s=n(7);n.d(t,"RimLightingMaterialProperty",(function(){return s.a}));var c=n(8);n.d(t,"CircleFadeMaterialProperty",(function(){return c.a}));var l=n(9);n.d(t,"CircleWaveMaterialProperty",(function(){return l.a}));var u=n(10);n.d(t,"WallTrailMaterialProperty",(function(){return u.a}))},function(e,t,n){var r=DC.Namespace.Cesium,i=n(14),o=n(15),a=n(16),s=n(17),c=n(18),l=n(19),u=n(20),f=n(21),p=n(2),h=n(2),d=n(22),m=n(23),y=n(24),v=n(25),_=n(26),g=n(27),b=n(28),C=n(29),x=n(30),w=n(31),A=n(32),z=n(33);r.ShaderSource._czmBuiltinsAndUniforms.czm_cellular=l,r.ShaderSource._czmBuiltinsAndUniforms.czm_snoise=u,r.Material.PolylineEmissionType="PolylineEmission",r.Material._materialCache.addMaterial(r.Material.PolylineEmissionType,{fabric:{type:r.Material.PolylineEmissionType,uniforms:{color:new r.Color(1,0,0,.7)},source:a},translucent:function(e){return!0}}),r.Material.PolylineFlowType="PolylineFlow",r.Material._materialCache.addMaterial(r.Material.PolylineFlowType,{fabric:{type:r.Material.PolylineFlowType,uniforms:{color:new r.Color(1,0,0,.7),speed:45},source:s},translucent:function(e){return!0}}),r.Material.PolylineTrailType="PolylineTrail",r.Material._materialCache.addMaterial(r.Material.PolylineTrailType,{fabric:{type:r.Material.PolylineTrailType,uniforms:{color:new r.Color(1,0,0,.7),image:o,speed:45},source:c},translucent:function(e){return!0}}),r.Material.AsphaltType="Asphalt",r.Material._materialCache.addMaterial(r.Material.AsphaltType,{fabric:{type:r.Material.AsphaltType,uniforms:{asphaltColor:new r.Color(.15,.15,.15,1),bumpSize:.02,roughness:.2},source:f},translucent:function(e){return e.uniforms.asphaltColor.alpha<1}}),r.Material.BlobType="Blob",r.Material._materialCache.addMaterial(r.Material.BlobType,{fabric:{type:r.Material.BlobType,uniforms:{lightColor:new r.Color(1,1,1,.5),darkColor:new r.Color(0,0,1,.5),frequency:10},source:p},translucent:function(e){var t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<0}}),r.Material.BrickType="Brick",r.Material._materialCache.addMaterial(r.Material.BrickType,{fabric:{type:r.Material.BrickType,uniforms:{brickColor:new r.Color(.6,.3,.1,1),mortarColor:new r.Color(.8,.8,.7,1),brickSize:new r.Cartesian2(.3,.15),brickPct:new r.Cartesian2(.9,.85),brickRoughness:.2,mortarRoughness:.1},source:h},translucent:function(e){var t=e.uniforms;return t.brickColor.alpha<1||t.mortarColor.alpha<1}}),r.Material.CementType="Cement",r.Material._materialCache.addMaterial(r.Material.CementType,{fabric:{type:r.Material.CementType,uniforms:{cementColor:new r.Color(.95,.95,.85,1),grainScale:.01,roughness:.3},source:d},translucent:function(e){return e.uniforms.cementColor.alpha<1}}),r.Material.ErosionType="Erosion",r.Material._materialCache.addMaterial(r.Material.ErosionType,{fabric:{type:r.Material.ErosionType,uniforms:{color:new r.Color(1,0,0,.5),time:1},source:m},translucent:function(e){return e.uniforms.color.alpha<1}}),r.Material.FacetType="Facet",r.Material._materialCache.addMaterial(r.Material.FacetType,{fabric:{type:r.Material.FacetType,uniforms:{lightColor:new r.Color(.25,.25,.25,.75),darkColor:new r.Color(.75,.75,.75,.75),frequency:10},source:y},translucent:function(e){var t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<0}}),r.Material.FresnelType="Fresnel",r.Material._materialCache.addMaterial(r.Material.FresnelType,{fabric:{type:r.Material.FresnelType,materials:{reflection:{type:r.Material.ReflectionType},refraction:{type:r.Material.RefractionType}},source:v},translucent:!1}),r.Material.GrassType="Grass",r.Material._materialCache.addMaterial(r.Material.GrassType,{fabric:{type:r.Material.GrassType,uniforms:{grassColor:new r.Color(.25,.4,.1,1),dirtColor:new r.Color(.1,.1,.1,1),patchiness:1.5},source:_},translucent:function(e){var t=e.uniforms;return t.grassColor.alpha<1||t.dirtColor.alpha<1}}),r.Material.ReflectionType="Reflection",r.Material._materialCache.addMaterial(r.Material.ReflectionType,{fabric:{type:r.Material.ReflectionType,uniforms:{cubeMap:r.Material.DefaultCubeMapId,channels:"rgb"},source:g},translucent:!1}),r.Material.RefractionType="Refraction",r.Material._materialCache.addMaterial(r.Material.RefractionType,{fabric:{type:r.Material.RefractionType,uniforms:{cubeMap:r.Material.DefaultCubeMapId,channels:"rgb",indexOfRefractionRatio:.9},source:b},translucent:!1}),r.Material.TyeDyeType="TieDye",r.Material._materialCache.addMaterial(r.Material.TyeDyeType,{fabric:{type:r.Material.TyeDyeType,uniforms:{lightColor:new r.Color(1,1,0,.75),darkColor:new r.Color(1,0,0,.75),frequency:5},source:C},translucent:function(e){var t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<0}}),r.Material.WoodType="Wood",r.Material._materialCache.addMaterial(r.Material.WoodType,{fabric:{type:r.Material.WoodType,uniforms:{lightWoodColor:new r.Color(.6,.3,.1,1),darkWoodColor:new r.Color(.4,.2,.07,1),ringFrequency:3,noiseScale:new r.Cartesian2(.7,.5),grainFrequency:27},source:x},translucent:function(e){var t=e.uniforms;return t.lightWoodColor.alpha<1||t.darkWoodColor.alpha<1}}),r.Material.CircleFadeType="CircleFade",r.Material._materialCache.addMaterial(r.Material.CircleFadeType,{fabric:{type:r.Material.CircleFadeType,uniforms:{color:new r.Color(1,0,0,.7),speed:45},source:w},translucent:function(e){return!0}}),r.Material.CircleWaveType="CircleWave",r.Material._materialCache.addMaterial(r.Material.CircleWaveType,{fabric:{type:r.Material.CircleWaveType,uniforms:{color:new r.Color(1,0,0,.7),speed:45,count:1,gradient:.1},source:A},translucent:function(e){return!0}}),r.Material.WallTrailMaterialType="WallTrailMaterial",r.Material._materialCache.addMaterial(r.Material.WallTrailMaterialType,{fabric:{type:r.Material.WallTrailMaterialType,uniforms:{color:new r.Color(1,0,0,.7),image:i,speed:10},source:z},translucent:function(e){return!0}})},function(e,t){e.exports="uniform vec4 lightColor;\nuniform vec4 darkColor;\nuniform float frequency;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\n  vec2 F = czm_cellular(materialInput.st * frequency);\n  float t = 1.0 - F.x * F.x;\n\n  vec4 color = mix(lightColor, darkColor, t);\n  material.diffuse = color.rgb;\n  material.alpha = color.a;\n\n  return material;\n}\n"},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=DC.Namespace.Cesium,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this._speed=void 0,this._speedSubscription=void 0,this.color=t.color||i.Color.fromBytes(0,255,255,255),this.speed=t.speed||45}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return i.Material.PolylineTrailType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=i.Property.getValueOrClonedDefault(this._color,e,i.Color.WHITE,t.color),t.speed=this._speed,t}},{key:"equals",value:function(t){return this===t||t instanceof e&&i.Property.equals(this._color,t._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&r(t.prototype,n),o&&r(t,o),e}();Object.defineProperties(o.prototype,{color:i.createPropertyDescriptor("color"),speed:i.createPropertyDescriptor("speed")}),t.a=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=DC.Namespace.Cesium,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.color=t.color||i.Color.fromBytes(0,255,255,255),this._speed=void 0,this._speedSubscription=void 0,this.speed=t.speed||45}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return i.Material.PolylineFlowType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=i.Property.getValueOrClonedDefault(this._color,e,i.Color.WHITE,t.color),t.speed=this._speed,t}},{key:"equals",value:function(t){return this===t||t instanceof e&&i.Property.equals(this._color,t._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&r(t.prototype,n),o&&r(t,o),e}();Object.defineProperties(o.prototype,{color:i.createPropertyDescriptor("color"),speed:i.createPropertyDescriptor("speed")}),t.a=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=DC.Namespace.Cesium,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.color=t.color||new i.Color(1,0,0,.7)}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return i.Material.PolylineEmissionType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=i.Property.getValueOrUndefined(this._color,e),t}},{key:"equals",value:function(t){return this===t||t instanceof e&&i.Property.equals(this._color,t._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&r(t.prototype,n),o&&r(t,o),e}();Object.defineProperties(o.prototype,{color:i.createPropertyDescriptor("color")}),t.a=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=DC.Namespace.Cesium,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new i.Event,this._baseWaterColor=void 0,this._baseWaterColorSubscription=void 0,this.baseWaterColor=t.baseWaterColor||new i.Color(.2,.3,.6,1),this._blendColor=void 0,this._blendColorSubscription=void 0,this.blendColor=t.blendColor||new i.Color(0,1,.699,1),this._specularMap=void 0,this._specularMapSubscription=void 0,this.specularMap=t.specularMap||i.Material.DefaultImageId,this._normalMap=void 0,this._normalMapSubscription=void 0,this.normalMap=t.normalMap||i.Material.DefaultImageId,this.frequency=i.defaultValue(t.frequency,10),this.animationSpeed=i.defaultValue(t.animationSpeed,.01),this.amplitude=i.defaultValue(t.amplitude,1),this.specularIntensity=i.defaultValue(t.specularIntensity,.5),this.fadeFactor=i.defaultValue(t.fadeFactor,1)}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return i.Material.WaterType}},{key:"getValue",value:function(e,t){return t||(t={}),t.baseWaterColor=i.Property.getValueOrUndefined(this._baseWaterColor,e),t.blendColor=i.Property.getValueOrUndefined(this._blendColor,e),t.specularMap=i.Property.getValueOrUndefined(this._specularMap,e),t.normalMap=i.Property.getValueOrUndefined(this._normalMap,e),t.frequency=this.frequency,t.animationSpeed=this.animationSpeed,t.amplitude=this.amplitude,t.specularIntensity=this.specularIntensity,t.fadeFactor=this.fadeFactor,t}},{key:"equals",value:function(t){return this===t||t instanceof e&&i.Property.equals(this._baseWaterColor,t._baseWaterColor)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&r(t.prototype,n),o&&r(t,o),e}();Object.defineProperties(o.prototype,{baseWaterColor:i.createPropertyDescriptor("baseWaterColor"),blendColor:i.createPropertyDescriptor("blendColor"),specularMap:i.createPropertyDescriptor("specularMap"),normalMap:i.createPropertyDescriptor("normalMap")}),t.a=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=DC.Namespace.Cesium,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.color=t.color||new i.Color(1,0,0,.7),this._rimColor=void 0,this._rimColorSubscription=void 0,this.rimColor=t.rimColor||new i.Color(1,1,1,.4),this._width=void 0,this._widthSubscription=void 0,this.width=t.width||.3}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return i.Material.RimLightingType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=i.Property.getValueOrUndefined(this._color,e),t.rimColor=i.Property.getValueOrUndefined(this._rimColor,e),t.width=i.Property.getValueOrUndefined(this._width,e),t}},{key:"equals",value:function(t){return this===t||t instanceof e&&i.Property.equals(this._color,t._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&r(t.prototype,n),o&&r(t,o),e}();Object.defineProperties(o.prototype,{color:i.createPropertyDescriptor("color"),rimColor:i.createPropertyDescriptor("rimColor"),width:i.createPropertyDescriptor("width")}),t.a=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=DC.Namespace.Cesium,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this._speed=void 0,this._speedSubscription=void 0,this.color=t.color||i.Color.fromBytes(0,255,255,255),this.speed=t.speed||45}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return i.Material.CircleFadeType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=i.Property.getValueOrUndefined(this._color,e),t.speed=this._speed,t}},{key:"equals",value:function(t){return this===t||t instanceof e&&i.Property.equals(this._color,t._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&r(t.prototype,n),o&&r(t,o),e}();Object.defineProperties(o.prototype,{color:i.createPropertyDescriptor("color"),speed:i.createPropertyDescriptor("speed")}),t.a=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=DC.Namespace.Cesium,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this._speed=void 0,this._speedSubscription=void 0,this.color=t.color||i.Color.fromBytes(0,255,255,255),this.speed=t.speed||45,this.count=Math.max(t.count||2,1),this.gradient=i.Math.clamp(t.gradient||.1,0,1)}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return i.Material.CircleWaveType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=i.Property.getValueOrUndefined(this._color,e),t.speed=this._speed,t.count=this.count,t.gradient=this.gradient,t}},{key:"equals",value:function(t){return this===t||t instanceof e&&i.Property.equals(this._color,t._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&r(t.prototype,n),o&&r(t,o),e}();Object.defineProperties(o.prototype,{color:i.createPropertyDescriptor("color"),speed:i.createPropertyDescriptor("speed")}),t.a=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=DC.Namespace.Cesium,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this._speed=void 0,this._speedSubscription=void 0,this.color=t.color||i.Color.fromBytes(0,255,0,255),this.speed=t.speed||45}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return i.Material.WallTrailMaterialType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=i.Property.getValueOrClonedDefault(this._color,e,i.Color.WHITE,t.color),t.speed=this._speed,t}},{key:"equals",value:function(t){return this===t||t instanceof e&&i.Property.equals(this._color,t._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&r(t.prototype,n),o&&r(t,o),e}();Object.defineProperties(o.prototype,{color:i.createPropertyDescriptor("color"),speed:i.createPropertyDescriptor("speed")}),t.a=o},function(e,t,n){e.exports=n(12)},function(e,t,n){var r=function(e){if(!e||!e.init)throw new Error("Plot: Missing DC Base");if(!e.ready)throw new Error("Plot: Missing DC Core");window.mapv&&(e.Namespace.mapv=window.mapv,e.MapvDataSet=window.mapv?window.mapv.DataSet:void 0,delete window.mapv),e.init((function(){n(39)}))};"undefined"!=typeof window&&window.DC&&r(DC),e.exports={install:r}},function(e,t,n){var r,i;!function(o,a,s){e.exports?e.exports=s():void 0===(i="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=i)}(0,0,(function(){var e={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},t=function(){var t=function(e){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=e.xField||e.defaultXField,this._yField=e.yField||e.defaultYField,this._valueField=e.valueField||e.defaultValueField,e.radius&&(this._cfgRadius=e.radius)},n=e.defaultRadius;return t.prototype={_organiseData:function(e,t){var r=e[this._xField],i=e[this._yField],o=this._radi,a=this._data,s=this._max,c=this._min,l=e[this._valueField]||1,u=e.radius||this._cfgRadius||n;a[r]||(a[r]=[],o[r]=[]),a[r][i]?a[r][i]+=l:(a[r][i]=l,o[r][i]=u);var f=a[r][i];return f>s?(t?this.setDataMax(f):this._max=f,!1):f<c?(t?this.setDataMin(f):this._min=f,!1):{x:r,y:i,value:l,radius:u,min:c,max:s}},_unOrganizeData:function(){var e=[],t=this._data,n=this._radi;for(var r in t)for(var i in t[r])e.push({x:r,y:i,radius:n[r][i],value:t[r][i]});return{min:this._min,max:this._max,data:e}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var e=arguments[0],t=e.length;t--;)this.addData.call(this,e[t]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(e){var t=e.data,n=t.length;this._data=[],this._radi=[];for(var r=0;r<n;r++)this._organiseData(t[r],!1);return this._max=e.max,this._min=e.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(e){return this._max=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(e){return this._min=e,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(e){this._coordinator=e},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t}(),n=function(){var e=function(e){var t=e.gradient||e.defaultGradient,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var o in t)i.addColorStop(o,t[o]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data},t=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=e,o=e;if(n.width=n.height=2*e,1==t)r.beginPath(),r.arc(i,o,e,0,2*Math.PI,!1),r.fillStyle="rgba(0,0,0,1)",r.fill();else{var a=r.createRadialGradient(i,o,e*t,i,o,e);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=a,r.fillRect(0,0,2*e,2*e)}return n};function n(t){var n=t.container,r=this.shadowCanvas=document.createElement("canvas"),i=this.canvas=t.canvas||document.createElement("canvas"),o=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});i.className="heatmap-canvas",this._width=i.width=r.width=t.width||+o.width.replace(/px/,""),this._height=i.height=r.height=t.height||+o.height.replace(/px/,""),this.shadowCtx=r.getContext("2d"),this.ctx=i.getContext("2d"),i.style.cssText=r.style.cssText="position:absolute;left:0;top:0;",n.style.position="relative",n.appendChild(i),this._palette=e(t),this._templates={},this._setStyles(t)}return n.prototype={renderPartial:function(e){e.data.length>0&&(this._drawAlpha(e),this._colorize())},renderAll:function(e){this._clear(),e.data.length>0&&(this._drawAlpha(function(e){for(var t=[],n=e.min,r=e.max,i=e.radi,o=(e=e.data,Object.keys(e)),a=o.length;a--;)for(var s=o[a],c=Object.keys(e[s]),l=c.length;l--;){var u=c[l],f=e[s][u],p=i[s][u];t.push({x:s,y:u,value:f,radius:p})}return{min:n,max:r,data:t}}(e)),this._colorize())},_updateGradient:function(t){this._palette=e(t)},updateConfig:function(e){e.gradient&&this._updateGradient(e),this._setStyles(e)},setDimensions:function(e,t){this._width=e,this._height=t,this.canvas.width=this.shadowCanvas.width=e,this.canvas.height=this.shadowCanvas.height=t},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(e){this._blur=0==e.blur?0:e.blur||e.defaultBlur,e.backgroundColor&&(this.canvas.style.backgroundColor=e.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=e.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=e.height||this._height,this._opacity=255*(e.opacity||0),this._maxOpacity=255*(e.maxOpacity||e.defaultMaxOpacity),this._minOpacity=255*(e.minOpacity||e.defaultMinOpacity),this._useGradientOpacity=!!e.useGradientOpacity},_drawAlpha:function(e){for(var n=this._min=e.min,r=this._max=e.max,i=(e=e.data||[]).length,o=1-this._blur;i--;){var a,s=e[i],c=s.x,l=s.y,u=s.radius,f=Math.min(s.value,r),p=c-u,h=l-u,d=this.shadowCtx;this._templates[u]?a=this._templates[u]:this._templates[u]=a=t(u,o);var m=(f-n)/(r-n);d.globalAlpha=m<.01?.01:m,d.drawImage(a,p,h),p<this._renderBoundaries[0]&&(this._renderBoundaries[0]=p),h<this._renderBoundaries[1]&&(this._renderBoundaries[1]=h),p+2*u>this._renderBoundaries[2]&&(this._renderBoundaries[2]=p+2*u),h+2*u>this._renderBoundaries[3]&&(this._renderBoundaries[3]=h+2*u)}},_colorize:function(){var e=this._renderBoundaries[0],t=this._renderBoundaries[1],n=this._renderBoundaries[2]-e,r=this._renderBoundaries[3]-t,i=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,c=this._minOpacity,l=this._useGradientOpacity;e<0&&(e=0),t<0&&(t=0),e+n>i&&(n=i-e),t+r>o&&(r=o-t);for(var u=this.shadowCtx.getImageData(e,t,n,r),f=u.data,p=f.length,h=this._palette,d=3;d<p;d+=4){var m,y=f[d],v=4*y;if(v)m=a>0?a:y<s?y<c?c:y:s,f[d-3]=h[v],f[d-2]=h[v+1],f[d-1]=h[v+2],f[d]=l?h[v+3]:m}u.data=f,this.ctx.putImageData(u,e,t),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(e){var t=this.shadowCtx.getImageData(e.x,e.y,1,1).data[3],n=this._max,r=this._min;return Math.abs(n-r)*(t/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},n}(),r=function(){var t=!1;return"canvas2d"===e.defaultRenderer&&(t=n),t}(),i=function(){for(var e={},t=arguments.length,n=0;n<t;n++){var r=arguments[n];for(var i in r)e[i]=r[i]}return e},o=function(){var n=function(){function e(){this.cStore={}}return e.prototype={on:function(e,t,n){var r=this.cStore;r[e]||(r[e]=[]),r[e].push((function(e){return t.call(n,e)}))},emit:function(e,t){var n=this.cStore;if(n[e])for(var r=n[e].length,i=0;i<r;i++){(0,n[e][i])(t)}}},e}(),o=function(e){var t=e._renderer,n=e._coordinator,r=e._store;n.on("renderpartial",t.renderPartial,t),n.on("renderall",t.renderAll,t),n.on("extremachange",(function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})})),r.setCoordinator(n)};function a(){var a=this._config=i(e,arguments[0]||{});if(this._coordinator=new n,a.plugin){var s=a.plugin;if(!e.plugins[s])throw new Error("Plugin '"+s+"' not found. Maybe it was not registered.");var c=e.plugins[s];this._renderer=new c.renderer(a),this._store=new c.store(a)}else this._renderer=new r(a),this._store=new t(a);o(this)}return a.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(e){return this._config=i(this._config,e),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(e){return this._store.getValueAt?this._store.getValueAt(e):this._renderer.getValueAt?this._renderer.getValueAt(e):null}},a}();return{create:function(e){return new o(e)},register:function(t,n){e.plugins[t]=n}}}))},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAOhlWElmTU0AKgAAAAgABgESAAMAAAABAAEAAAEaAAUAAAABAAAAVgEbAAUAAAABAAAAXgExAAIAAAAkAAAAZgEyAAIAAAAUAAAAiodpAAQAAAABAAAAngAAAAAAAABIAAAAAQAAAEgAAAABQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkAMjAxODoxMDoyNiAxNTozMDozNAAABJAEAAIAAAAUAAAA1KABAAMAAAABAAEAAKACAAQAAAABAAAAQKADAAQAAAABAAAAQAAAAAAyMDE4OjEwOjI2IDE1OjI0OjI1ALUCxicAAAAJcEhZcwAACxMAAAsTAQCanBgAAAdgaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6MjgyZGYxNWEtYzg5MC00ODUzLWJlZDQtOWEyZjQxMmY0NjljPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjI4MmRmMTVhLWM4OTAtNDg1My1iZWQ0LTlhMmY0MTJmNDY5YzwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjI4MmRmMTVhLWM4OTAtNDg1My1iZWQ0LTlhMmY0MTJmNDY5YzwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxOC0xMC0yNlQxNToyNDoyNSswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDoyODJkZjE1YS1jODkwLTQ4NTMtYmVkNC05YTJmNDEyZjQ2OWM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE4LTEwLTI2VDE1OjMwOjM0KzA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKTwveG1wOkNyZWF0b3JUb29sPgog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"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAAgCAYAAABkS8DlAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAADSSURBVHja7NYxEoUgDEDBYM39z2qHtZViwMFxt1FJnF/98ZXWWkRE7LWWOOt5Lsm9q/vsbu9Zdtazs/J19O5bs1XPZrwze/6V31zxbOZs1n905Wt2p3f25GzE7ohv6q3nLQCA3xEAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAA8g4AAAD//wMA4WEFTJOT5UIAAAAASUVORK5CYII="},function(e,t){e.exports="uniform vec4 color;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    vec4 fragColor = color;\n    fragColor = czm_gammaCorrect(fragColor);\n    material.emission = fragColor.rgb;\n    material.diffuse = fragColor.rgb;\n    material.alpha = color.a;\n    return material;\n}\n"},function(e,t){e.exports="uniform vec4 color;\nuniform float speed;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    vec2 st = materialInput.st;\n    float t =fract(czm_frameNumber * speed / 1000.0);\n    t *= 1.03;\n    float alpha = smoothstep(t- 0.03, t, st.s) * step(-t, -st.s);\n    alpha += 0.1;\n    material.diffuse = color.rgb;\n    material.alpha = alpha;\n    return material;\n}\n"},function(e,t){e.exports=" uniform sampler2D image;\n uniform float speed;\n uniform vec4 color;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n   czm_material material = czm_getDefaultMaterial(materialInput);\n   vec2 st = materialInput.st;\n   float time = fract(czm_frameNumber * speed / 1000.0);\n   vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n   if(color.a == 0.0){\n    material.alpha = colorImage.a;\n    material.diffuse = colorImage.rgb;\n   }else{\n    material.alpha = colorImage.a * color.a;\n    material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\n   }\n   return material;\n}\n"},function(e,t){e.exports='/**\n * @license\n * Cellular noise ("Worley noise") in 2D in GLSL.\n * Copyright (c) Stefan Gustavson 2011-04-19. All rights reserved.\n * This code is released under the conditions of the MIT license.\n * See LICENSE file for details.\n */\n\n//#ifdef GL_OES_standard_derivatives\n//    #extension GL_OES_standard_derivatives : enable\n//#endif\n//\n//float aastep (float threshold , float value)\n//{\n//    float afwidth = 0.7 * length ( vec2 ( dFdx ( value ), dFdy ( value )));\n//    return smoothstep ( threshold - afwidth , threshold + afwidth , value );\n//}\n\n// Permutation polynomial: (34x^2 + x) mod 289\nvec3 _czm_permute289(vec3 x)\n{\n    return mod((34.0 * x + 1.0) * x, 289.0);\n}\n\n/**\n * DOC_TBA\n *\n * Implemented by Stefan Gustavson, and distributed under the MIT License.  {@link http://openglinsights.git.sourceforge.net/git/gitweb.cgi?p=openglinsights/openglinsights;a=tree;f=proceduraltextures}\n *\n * @name czm_cellular\n * @glslFunction\n *\n * @see Stefan Gustavson\'s chapter, <i>Procedural Textures in GLSL</i>, in <a href="http://www.openglinsights.com/">OpenGL Insights</a>.\n */\nvec2 czm_cellular(vec2 P)\n// Cellular noise, returning F1 and F2 in a vec2.\n// Standard 3x3 search window for good F1 and F2 values\n{\n#define K 0.142857142857 // 1/7\n#define Ko 0.428571428571 // 3/7\n#define jitter 1.0 // Less gives more regular pattern\n    vec2 Pi = mod(floor(P), 289.0);\n    vec2 Pf = fract(P);\n    vec3 oi = vec3(-1.0, 0.0, 1.0);\n    vec3 of = vec3(-0.5, 0.5, 1.5);\n    vec3 px = _czm_permute289(Pi.x + oi);\n    vec3 p = _czm_permute289(px.x + Pi.y + oi); // p11, p12, p13\n    vec3 ox = fract(p*K) - Ko;\n    vec3 oy = mod(floor(p*K),7.0)*K - Ko;\n    vec3 dx = Pf.x + 0.5 + jitter*ox;\n    vec3 dy = Pf.y - of + jitter*oy;\n    vec3 d1 = dx * dx + dy * dy; // d11, d12 and d13, squared\n    p = _czm_permute289(px.y + Pi.y + oi); // p21, p22, p23\n    ox = fract(p*K) - Ko;\n    oy = mod(floor(p*K),7.0)*K - Ko;\n    dx = Pf.x - 0.5 + jitter*ox;\n    dy = Pf.y - of + jitter*oy;\n    vec3 d2 = dx * dx + dy * dy; // d21, d22 and d23, squared\n    p = _czm_permute289(px.z + Pi.y + oi); // p31, p32, p33\n    ox = fract(p*K) - Ko;\n    oy = mod(floor(p*K),7.0)*K - Ko;\n    dx = Pf.x - 1.5 + jitter*ox;\n    dy = Pf.y - of + jitter*oy;\n    vec3 d3 = dx * dx + dy * dy; // d31, d32 and d33, squared\n    // Sort out the two smallest distances (F1, F2)\n    vec3 d1a = min(d1, d2);\n    d2 = max(d1, d2); // Swap to keep candidates for F2\n    d2 = min(d2, d3); // neither F1 nor F2 are now in d3\n    d1 = min(d1a, d2); // F1 is now in d1\n    d2 = max(d1a, d2); // Swap to keep candidates for F2\n    d1.xy = (d1.x < d1.y) ? d1.xy : d1.yx; // Swap if smaller\n    d1.xz = (d1.x < d1.z) ? d1.xz : d1.zx; // F1 is in d1.x\n    d1.yz = min(d1.yz, d2.yz); // F2 is now not in d2.yz\n    d1.y = min(d1.y, d1.z); // nor in  d1.z\n    d1.y = min(d1.y, d2.x); // F2 is in d1.y, we\'re done.\n    return sqrt(d1.xy);\n}\n'},function(e,t){e.exports='/**\n * @license\n * Description : Array and textureless GLSL 2D/3D/4D simplex\n *               noise functions.\n *      Author : Ian McEwan, Ashima Arts.\n *  Maintainer : ijm\n *     Lastmod : 20110822 (ijm)\n *     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n *               Distributed under the MIT License. See LICENSE file.\n *               https://github.com/ashima/webgl-noise\n */\n\nvec4 _czm_mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 _czm_mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 _czm_mod289(vec2 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nfloat _czm_mod289(float x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 _czm_permute(vec4 x)\n{\n    return _czm_mod289(((x*34.0)+1.0)*x);\n}\n\nvec3 _czm_permute(vec3 x)\n{\n    return _czm_mod289(((x*34.0)+1.0)*x);\n}\n\nfloat _czm_permute(float x)\n{\n    return _czm_mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 _czm_taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat _czm_taylorInvSqrt(float r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 _czm_grad4(float j, vec4 ip)\n{\n    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n    vec4 p,s;\n\n    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n    s = vec4(lessThan(p, vec4(0.0)));\n    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n    return p;\n}\n\n/**\n * DOC_TBA\n *\n * Implemented by Ian McEwan, Ashima Arts, and distributed under the MIT License.  {@link https://github.com/ashima/webgl-noise}\n *\n * @name czm_snoise\n * @glslFunction\n *\n * @see <a href="https://github.com/ashima/webgl-noise">https://github.com/ashima/webgl-noise</a>\n * @see Stefan Gustavson\'s paper <a href="http://www.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf">Simplex noise demystified</a>\n */\nfloat czm_snoise(vec2 v)\n{\n    const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                        0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                       -0.577350269189626,  // -1.0 + 2.0 * C.x\n                        0.024390243902439); // 1.0 / 41.0\n    // First corner\n    vec2 i  = floor(v + dot(v, C.yy) );\n    vec2 x0 = v -   i + dot(i, C.xx);\n\n    // Other corners\n    vec2 i1;\n    //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n    //i1.y = 1.0 - i1.x;\n    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n    // x0 = x0 - 0.0 + 0.0 * C.xx ;\n    // x1 = x0 - i1 + 1.0 * C.xx ;\n    // x2 = x0 - 1.0 + 2.0 * C.xx ;\n    vec4 x12 = x0.xyxy + C.xxzz;\n    x12.xy -= i1;\n\n    // Permutations\n    i = _czm_mod289(i); // Avoid truncation effects in permutation\n    vec3 p = _czm_permute( _czm_permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));\n\n    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n    m = m*m ;\n    m = m*m ;\n\n    // Gradients: 41 points uniformly over a line, mapped onto a diamond.\n    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n    vec3 x = 2.0 * fract(p * C.www) - 1.0;\n    vec3 h = abs(x) - 0.5;\n    vec3 ox = floor(x + 0.5);\n    vec3 a0 = x - ox;\n\n    // Normalise gradients implicitly by scaling m\n    // Approximation of: m *= inversesqrt( a0*a0 + h*h );\n    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n    // Compute final noise value at P\n    vec3 g;\n    g.x  = a0.x  * x0.x  + h.x  * x0.y;\n    g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n    return 130.0 * dot(m, g);\n}\n\nfloat czm_snoise(vec3 v)\n{\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n    // First corner\n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n    // Other corners\n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n\n    //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n    //   x1 = x0 - i1  + 1.0 * C.xxx;\n    //   x2 = x0 - i2  + 2.0 * C.xxx;\n    //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n    vec3 x1 = x0 - i1 + C.xxx;\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n    // Permutations\n    i = _czm_mod289(i);\n    vec4 p = _czm_permute( _czm_permute( _czm_permute(\n                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n    float n_ = 0.142857142857; // 1.0/7.0\n    vec3  ns = n_ * D.wyz - D.xzx;\n\n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n\n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n\n    //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n    //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n\n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n\n    //Normalise gradients\n    vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n\n    // Mix final noise value\n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat czm_snoise(vec4 v)\n{\n    const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                          0.276393202250021,  // 2 * G4\n                          0.414589803375032,  // 3 * G4\n                         -0.447213595499958); // -1 + 4 * G4\n\n    // (sqrt(5) - 1)/4 = F4, used once below\n    #define F4 0.309016994374947451\n\n    // First corner\n    vec4 i  = floor(v + dot(v, vec4(F4)) );\n    vec4 x0 = v -   i + dot(i, C.xxxx);\n\n    // Other corners\n\n    // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n    vec4 i0;\n    vec3 isX = step( x0.yzw, x0.xxx );\n    vec3 isYZ = step( x0.zww, x0.yyz );\n    //  i0.x = dot( isX, vec3( 1.0 ) );\n    i0.x = isX.x + isX.y + isX.z;\n    i0.yzw = 1.0 - isX;\n    //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n    i0.y += isYZ.x + isYZ.y;\n    i0.zw += 1.0 - isYZ.xy;\n    i0.z += isYZ.z;\n    i0.w += 1.0 - isYZ.z;\n\n    // i0 now contains the unique values 0,1,2,3 in each channel\n    vec4 i3 = clamp( i0, 0.0, 1.0 );\n    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n    //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n    //  x1 = x0 - i1  + 1.0 * C.xxxx\n    //  x2 = x0 - i2  + 2.0 * C.xxxx\n    //  x3 = x0 - i3  + 3.0 * C.xxxx\n    //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n    vec4 x1 = x0 - i1 + C.xxxx;\n    vec4 x2 = x0 - i2 + C.yyyy;\n    vec4 x3 = x0 - i3 + C.zzzz;\n    vec4 x4 = x0 + C.wwww;\n\n    // Permutations\n    i = _czm_mod289(i);\n    float j0 = _czm_permute( _czm_permute( _czm_permute( _czm_permute(i.w) + i.z) + i.y) + i.x);\n    vec4 j1 = _czm_permute( _czm_permute( _czm_permute( _czm_permute (\n               i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n             + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n             + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n             + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n    // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n    // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n    vec4 p0 = _czm_grad4(j0,   ip);\n    vec4 p1 = _czm_grad4(j1.x, ip);\n    vec4 p2 = _czm_grad4(j1.y, ip);\n    vec4 p3 = _czm_grad4(j1.z, ip);\n    vec4 p4 = _czm_grad4(j1.w, ip);\n\n    // Normalise gradients\n    vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    p4 *= _czm_taylorInvSqrt(dot(p4,p4));\n\n    // Mix contributions from the five corners\n    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n    m0 = m0 * m0;\n    m1 = m1 * m1;\n    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n                  + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n}\n'},function(e,t){e.exports="uniform vec4 asphaltColor;\nuniform float bumpSize;\nuniform float roughness;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\n  //Main cellular pattern\n  vec4 color = asphaltColor;\n  vec2 st = materialInput.st;\n  vec2 F = czm_cellular(st / bumpSize);\n  color.rgb -= (F.x / F.y) * 0.1;\n\n  //Extra bumps for roughness\n  float noise = czm_snoise(st / bumpSize);\n  noise = pow(noise, 5.0) * roughness;\n  color.rgb += noise;\n\n  material.diffuse = color.rgb;\n  material.alpha = color.a;\n\n  return material;\n}\n"},function(e,t){e.exports="uniform vec4 cementColor;\nuniform float grainScale;\nuniform float roughness;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  float noise = czm_snoise(materialInput.st / grainScale);\n  noise = pow(noise, 5.0) * roughness;\n\n  vec4 color = cementColor;\n  color.rgb += noise;\n\n  material.diffuse = color.rgb;\n  material.alpha = color.a;\n\n  return material;\n}\n"},function(e,t){e.exports="uniform vec4 color;\nuniform float time;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  float alpha = 1.0;\n  if (time != 1.0)\n  {\n      float t = 0.5 + (0.5 * czm_snoise(materialInput.str / (1.0 / 10.0)));   // Scale [-1, 1] to [0, 1]\n\n      if (t > time)\n      {\n          alpha = 0.0;\n      }\n  }\n\n  material.diffuse = color.rgb;\n  material.alpha = color.a * alpha;\n\n  return material;\n}\n"},function(e,t){e.exports="uniform vec4 lightColor;\nuniform vec4 darkColor;\nuniform float frequency;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\n  vec2 F = czm_cellular(materialInput.st * frequency);\n  float t = 0.1 + (F.y - F.x);\n\n  vec4 color = mix(lightColor, darkColor, t);\n  material.diffuse = color.rgb;\n  material.alpha = color.a;\n\n  return material;\n}\n"},function(e,t){e.exports="czm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  vec3 normalWC = normalize(czm_inverseViewRotation * material.normal);\n  vec3 positionWC = normalize(czm_inverseViewRotation * materialInput.positionToEyeEC);\n  float cosAngIncidence = max(dot(normalWC, positionWC), 0.0);\n\n  material.diffuse = mix(reflection.diffuse, refraction.diffuse, cosAngIncidence);\n\n  return material;\n}\n"},function(e,t){e.exports="uniform vec4 grassColor;\nuniform vec4 dirtColor;\nuniform float patchiness;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  vec2 st = materialInput.st;\n  float noise1 = (czm_snoise(st * patchiness * 1.0)) * 1.0;\n  float noise2 = (czm_snoise(st * patchiness * 2.0)) * 0.5;\n  float noise3 = (czm_snoise(st * patchiness * 4.0)) * 0.25;\n  float noise = sin(noise1 + noise2 + noise3) * 0.1;\n\n  vec4 color = mix(grassColor, dirtColor, noise);\n\n  //Make thatch patterns\n  float verticalNoise = czm_snoise(vec2(st.x * 100.0, st.y * 20.0)) * 0.02;\n  float horizontalNoise = czm_snoise(vec2(st.x * 20.0, st.y * 100.0)) * 0.02;\n  float stripeNoise = min(verticalNoise, horizontalNoise);\n\n  color.rgb += stripeNoise;\n\n  material.diffuse = color.rgb;\n  material.alpha = color.a;\n\n  return material;\n}\n"},function(e,t){e.exports="uniform samplerCube cubeMap;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  vec3 normalWC = normalize(czm_inverseViewRotation * material.normal);\n  vec3 positionWC = normalize(czm_inverseViewRotation * materialInput.positionToEyeEC);\n  vec3 reflectedWC = reflect(positionWC, normalWC);\n  material.diffuse = textureCube(cubeMap, reflectedWC).channels;\n\n  return material;\n}\n"},function(e,t){e.exports="uniform samplerCube cubeMap;\nuniform float indexOfRefractionRatio;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  vec3 normalWC = normalize(czm_inverseViewRotation * material.normal);\n  vec3 positionWC = normalize(czm_inverseViewRotation * materialInput.positionToEyeEC);\n  vec3 refractedWC = refract(positionWC, -normalWC, indexOfRefractionRatio);\n  material.diffuse = textureCube(cubeMap, refractedWC).channels;\n\n  return material;\n}\n"},function(e,t){e.exports="uniform vec4 lightColor;\nuniform vec4 darkColor;\nuniform float frequency;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  vec3 scaled = materialInput.str * frequency;\n  float t = abs(czm_snoise(scaled));\n\n  vec4 color = mix(lightColor, darkColor, t);\n  material.diffuse = color.rgb;\n  material.alpha = color.a;\n\n  return material;\n}\n"},function(e,t){e.exports="uniform vec4 lightWoodColor;\nuniform vec4 darkWoodColor;\nuniform float ringFrequency;\nuniform vec2 noiseScale;\nuniform float grainFrequency;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n\n  //Based on wood shader from OpenGL Shading Language (3rd edition) pg. 455\n  vec2 st = materialInput.st;\n\n  vec2 noisevec;\n  noisevec.x = czm_snoise(st * noiseScale.x);\n  noisevec.y = czm_snoise(st * noiseScale.y);\n\n  vec2 location = st + noisevec;\n  float dist = sqrt(location.x * location.x + location.y * location.y);\n  dist *= ringFrequency;\n\n  float r = fract(dist + noisevec[0] + noisevec[1]) * 2.0;\n  if(r > 1.0)\n      r = 2.0 - r;\n\n  vec4 color = mix(lightWoodColor, darkWoodColor, r);\n\n  //streaks\n  r = abs(czm_snoise(vec2(st.x * grainFrequency, st.y * grainFrequency * 0.02))) * 0.2;\n  color.rgb += lightWoodColor.rgb * r;\n\n  material.diffuse = color.rgb;\n  material.alpha = color.a;\n\n  return material;\n}\n"},function(e,t){e.exports="uniform vec4 color;\nuniform float speed;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  material.diffuse = 1.5 * color.rgb;\n  vec2 st = materialInput.st;\n  float dis = distance(st, vec2(0.5, 0.5));\n  float per = fract(czm_frameNumber * speed / 1000.0);\n  if(dis > per * 0.5){\n   discard;\n  }else {\n    material.alpha = color.a  * dis / per / 2.0;\n  }\n  return material;\n}\n"},function(e,t){e.exports="uniform vec4 color;\nuniform float speed;\nuniform float count;\nuniform float gradient;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  material.diffuse = 1.5 * color.rgb;\n  vec2 st = materialInput.st;\n  vec3 str = materialInput.str;\n  float dis = distance(st, vec2(0.5, 0.5));\n  float per = fract(czm_frameNumber * speed / 1000.0 );\n  if(abs(str.z)>0.001){\n    discard;\n  }\n  if(dis >0.5){\n    discard;\n  }else {\n    float perDis = 0.5 / count;\n    float disNum;\n    float bl = .0;\n    for(int i=0;i<=10;i++){\n      if(float(i)<=count){\n        disNum = perDis*float(i) - dis + per/count;\n        if(disNum>0.0){\n          if(disNum<perDis){\n            bl = 1.0-disNum/perDis;\n          }else if(disNum-perDis<perDis){\n            bl = 1.0 - abs(1.0-disNum/perDis);\n          }\n          material.alpha = pow(bl,gradient);\n        }\n      }\n    }\n  }\n  return material;\n}\n\n"},function(e,t){e.exports=" uniform sampler2D image;\n uniform float speed;\n uniform vec4 color;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n   czm_material material = czm_getDefaultMaterial(materialInput);\n   vec2 st = materialInput.st;\n   float time = fract(czm_frameNumber * speed / 1000.0);\n   vec4 colorImage = texture2D(image, vec2(fract(st.t - time), st.t));\n   if(color.a == 0.0){\n    material.alpha = colorImage.a;\n    material.diffuse = colorImage.rgb;\n   }else{\n    material.alpha = colorImage.a * color.a;\n    material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\n   }\n   return material;\n}\n"},function(e,t){e.exports="uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\n\nvec4 toEye(in vec2 uv, in float depth){\n  vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n  posInCamera =posInCamera / posInCamera.w;\n  return posInCamera;\n}\n\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n    vec3 v01 = point - planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n}\n\nfloat getDepth(in vec4 depth){\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\n\nvoid main(){\n    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n    float depth = getDepth(texture2D(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    if(dis < u_radius){\n      float f = 1.0 - abs(u_radius - dis) / u_radius;\n      f = pow(f, 4.0);\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f);\n    }\n  }\n"},function(e,t){e.exports="uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nuniform float trength;\nuniform vec4 fogcolor;\nvarying vec2 v_textureCoordinates;\n\nvoid main(void){\n  vec4 origcolor = texture2D(colorTexture, v_textureCoordinates);\n  vec4 depthcolor = texture2D(depthTexture, v_textureCoordinates);\n  float f= clamp( trength * (depthcolor.r - 0.3 ) / 0.2, 0.0, 1.0);\n  gl_FragColor = mix(origcolor,fogcolor,f);\n}\n"},function(e,t){e.exports="uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform vec3 u_scanLineNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\n\nvec4 toEye(in vec2 uv, in float depth){\n  vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n  vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n  posInCamera =posInCamera / posInCamera.w;\n  return posInCamera;\n}\n\nbool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt){\n  vec3 v01 = testPt - ptOnLine;\n  normalize(v01);\n  vec3 temp = cross(v01, lineNormal);\n  float d = dot(temp, u_scanPlaneNormalEC);\n  return d > 0.5;\n}\n\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n  vec3 v01 = point -planeOrigin;\n  float d = dot(planeNormal, v01) ;\n  return (point - planeNormal * d);\n}\n\nfloat distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt){\n  vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\n  return length(tempPt - ptOnLine);\n}\n\nfloat getDepth(in vec4 depth){\n  float z_window = czm_unpackDepth(depth);\n  z_window = czm_reverseLogDepth(z_window);\n  float n_range = czm_depthRange.near;\n  float f_range = czm_depthRange.far;\n  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\n\nvoid main(){\n  gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n  float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\n  vec4 viewPos = toEye(v_textureCoordinates, depth);\n  vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n  float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n  float twou_radius = u_radius * 2.0;\n  if(dis < u_radius){\n      float f0 = 1.0 -abs(u_radius - dis) / u_radius;\n      f0 = pow(f0, 64.0);\n      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\n      float f = 0.0;\n      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz)){\n          float dis1= length(prjOnPlane.xyz - lineEndPt);\n          f = abs(twou_radius -dis1) / twou_radius;\n          f = pow(f, 3.0);\n      }\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);\n    }\n}\n"},function(e,t){e.exports="uniform sampler2D colorTexture;\nvarying vec2 v_textureCoordinates;\n\nfloat hash(float x){\n  return fract(sin(x*23.3)*13.13);\n}\n\nvoid main(){\n    float time = czm_frameNumber / 60.0;\n    vec2 resolution = czm_viewport.zw;\n    vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n    vec3 c=vec3(.6,.7,.8);\n    float a=-.4;\n    float si=sin(a),co=cos(a);\n    uv*=mat2(co,-si,si,co);\n    uv*=length(uv+vec2(0,4.9))*.3+1.;\n    float v=1.-sin(hash(floor(uv.x*100.))*2.);\n    float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*20.;\n    c*=v*b;\n    gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c,1), 0.5);\n}\n"},function(e,t){e.exports="uniform sampler2D colorTexture;\nvarying vec2 v_textureCoordinates;\n\nfloat snow(vec2 uv,float scale){\n    float time = czm_frameNumber / 60.0;\n    float w=smoothstep(1.,0.,-uv.y*(scale/10.));\n    if(w<.1)return 0.;\n    uv+=time/scale;\n    uv.y+=time*2./scale;\n    uv.x+=sin(uv.y+time*.5)/scale;\n    uv*=scale;\n    vec2 s=floor(uv),f=fract(uv),p;\n    float k=3.,d;\n    p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;\n    d=length(p);\n    k=min(d,k);\n    k=smoothstep(0.,k,sin(f.x+f.y)*0.01);\n    return k*w;\n}\n\nvoid main(){\n    vec2 resolution = czm_viewport.zw;\n    vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n    vec3 finalColor=vec3(0);\n    float c = 0.0;\n    c+=snow(uv,30.)*.0;\n    c+=snow(uv,20.)*.0;\n    c+=snow(uv,15.)*.0;\n    c+=snow(uv,10.);\n    c+=snow(uv,8.);\n    c+=snow(uv,6.);\n    c+=snow(uv,5.);\n    finalColor=(vec3(c));\n    gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), 0.3);\n\n}\n\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var o=DC,a=o.SceneEventType,s=o.Util,c=DC.Namespace.Cesium,l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),!s.checkViewer(t))throw new Error("AroundView: the viewer invalid");this._viewer=t,this._options=n,this._heading=t.camera.heading,this._startTime=c.JulianDate.now(),this._duration=this._options.duration||10,this._stopTime=c.JulianDate.addSeconds(this._startTime,this._duration,new c.JulianDate),this._start()}var t,n,o;return t=e,(n=[{key:"_start",value:function(){this._viewer.clock.currentTime=this._startTime.clone(),this._viewer.on(a.CLOCK_TICK,this._onTickHandler,this)}},{key:"_onTickHandler",value:function(){var e=this._viewer.clock.currentTime,t=c.JulianDate.secondsDifference(e,this._startTime),n=c.Math.toRadians(t*(360/this._duration))+this._heading;this._viewer.scene.camera.setView({orientation:{heading:n}}),c.JulianDate.compare(e,this._stopTime)>=0&&(this._viewer.off(a.CLOCK_TICK,this._onTickHandler,this),this._options.callback&&this._options.callback.call(this._options.context||this))}}])&&i(t.prototype,n),o&&i(t,o),e}();function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=DC,h=p.Util,d=p.SceneEventType,m=p.Transform,y=p.Parse,v=DC.Namespace.Cesium,_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(u(this,e),!h.checkViewer(t))throw new Error("AroundPointthe viewer invalid");this._viewer=t,this._position=y.parsePosition(n),this._options=r,this._heading=t.camera.heading,this._startTime=v.JulianDate.now(),this._duration=this._options.duration||10,this._stopTime=v.JulianDate.addSeconds(this._startTime,this._duration,new v.JulianDate),this._start()}var t,n,r;return t=e,(n=[{key:"_start",value:function(){this._viewer.clock.currentTime=this._startTime.clone(),this._viewer.on(d.CLOCK_TICK,this._onTickHandler,this)}},{key:"_onTickHandler",value:function(){var e=this._viewer.scene,t=this._viewer.clock.currentTime,n=v.JulianDate.secondsDifference(t,this._startTime),r=v.Math.toRadians(n*(360/this._duration))+this._heading;e.camera.setView({destination:m.transformWGS84ToCartesian(this._position),orientation:{heading:r,pitch:v.Math.toRadians(this._options.pitch||0)}}),this._options.distance&&e.camera.moveBackward(this._options.distance),v.JulianDate.compare(t,this._stopTime)>=0&&(this._viewer.off(d.CLOCK_TICK,this._onTickHandler,this),this._options.callback&&this._options.callback.call(this._options.context||this))}}])&&f(t.prototype,n),r&&f(t,r),e}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=DC.Namespace.Cesium,x=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;g(this,e),this._viewer=t,this._duration=r,this._callback=i,this._startRotate();var a=setTimeout((function(){n._endRotate(),n._callback&&n._callback.call(o||n),clearTimeout(a)}),1e3*Number(this._duration))}var t,n,r;return t=e,(n=[{key:"_icrf",value:function(e,t){if(e.mode!==C.SceneMode.SCENE3D)return!1;var n=C.Transforms.computeIcrfToFixedMatrix(t);if(C.defined(n)){var r=this._viewer.camera,i=C.Cartesian3.clone(r.position),o=C.Matrix4.fromRotationTranslation(n);r.lookAtTransform(o,i)}}},{key:"_startRotate",value:function(){this._viewer.camera.lookAtTransform(C.Matrix4.IDENTITY),this._viewer.clock.multiplier=12e3,this._viewer.scene.postUpdate.addEventListener(this._icrf,this)}},{key:"_endRotate",value:function(){this._viewer.camera.lookAtTransform(C.Matrix4.IDENTITY),this._viewer.clock.multiplier=1,this._viewer.clock.currentTime=C.JulianDate.now().clone(),this._viewer.scene.postUpdate.removeEventListener(this._icrf,this)}}])&&b(t.prototype,n),r&&b(t,r),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var i=E(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=DC,k=j.State,R=j.Layer,N=DC.Namespace.Cesium,L={size:48,pixelRange:40,gradient:{1e-4:N.Color.BLUE.withAlpha(.5),.001:N.Color.GREEN.withAlpha(.5),.01:N.Color.ORANGE.withAlpha(.5),.1:N.Color.RED.withAlpha(.5)},fontSize:14,fontColor:N.Color.BLACK},B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(o,e);var t,n,r,i=O(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return I(this,o),(t=i.call(this,e))._delegate=new N.CustomDataSource(e),t._options=z(z({},L),n),t._delegate.clustering.enabled=!0,t._delegate.clustering.clusterEvent.addEventListener(t._clusterEventHandler,S(t)),t._circleCache={},t._delegate.clustering.pixelRange=t._options.pixelRange,t.type=R.getLayerType("cluster"),t._state=k.INITIALIZED,t}return t=o,(n=[{key:"_drawCircle",value:function(e){var t=e.toCssColorString(),n=this._options.size;if(!this._circleCache[t]){var r=document.createElement("canvas");r.width=n,r.height=n;var i=r.getContext("2d");i.save(),i.scale(n/24,n/24),i.fillStyle=e.withAlpha(.2).toCssColorString(),i.beginPath(),i.arc(12,12,12,0,2*Math.PI),i.closePath(),i.fill(),i.beginPath(),i.arc(12,12,9,0,2*Math.PI),i.fillStyle=e.toCssColorString(),i.fill(),i.closePath(),i.restore(),this._circleCache[t]=r.toDataURL()}return this._circleCache[t]}},{key:"_clusterEventHandler",value:function(e,t){if(!this._delegate.clustering.enabled)return!1;if(t.billboard.show=!0,t.label.font="bold ".concat(this._options.fontSize,"px sans-serif"),t.label.fillColor=this._options.fontColor,t.label.disableDepthTestDistance=Number.POSITIVE_INFINITY,this._delegate.entities.values.length){var n=this._delegate.entities.values.length||0;for(var r in this._options.gradient)if(e.length>=n*r){t.billboard.image=this._drawCircle(this._options.gradient[r]),t.billboard.disableDepthTestDistance=Number.POSITIVE_INFINITY,t.label.show=!0;var i=String(e.length+",").length;t.label.pixelOffset=new N.Cartesian2(-this._options.size/this._options.fontSize*(i-1),6)}else e.length<=1&&(t.label.show=!1)}}},{key:"clear",value:function(){return this._delegate.entities.removeAll(),this._cache={},this._state=k.CLEARED,this}},{key:"enableCluster",set:function(e){this._delegate.clustering.enabled=e}}])&&M(t.prototype,n),r&&M(t,r),o}(R);R.registerType("cluster");var G=B;function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var i=Y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=DC,q=U.State,Q=U.Layer,X=DC.Namespace.Cesium,K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(o,e);var t,n,r,i=H(o);function o(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(F(this,o),!t)throw new Error("CzmlLayer: the url is empty");return(n=i.call(this,e))._delegate=X.CzmlDataSource.load(t,r),n.type=Q.getLayerType("czml"),n._state=q.INITIALIZED,n}return t=o,(n=[{key:"eachOverlay",value:function(e,t){if(this._delegate)return this._delegate.then((function(n){n.entities.values.forEach((function(n){e.call(t,n)}))})),this}},{key:"show",set:function(e){var t=this;this._show=e,this._delegate&&this._delegate.then((function(e){e.show=t._show}))},get:function(){return this._show}}])&&V(t.prototype,n),r&&V(t,r),o}(Q);Q.registerType("czml");var $=K;function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var i=ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return se(this,n)}}function se(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var le=DC,ue=le.State,fe=le.Layer,pe=le.SceneEventType,he=le.Transform,de=le.Position,me=le.DomUtil,ye=le.Util,ve=DC.Namespace.Cesium,_e=n(13),ge={maxOpacity:.8,minOpacity:.1,blur:.85,maxCanvasSize:2e3,minCanvasSize:700,radius:25,gradient:{.4:"blue",.6:"green",.8:"yellow",.9:"red"}},be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(o,e);var t,n,r,i=ae(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e))._options=ne(ne({},ge),t),n._heat=void 0,n._bounds=void 0,n._mBounds=void 0,n._scale=1,n._positions=[],n._options.spacing=1.5*n._options.radius,n._delegate=new ve.CustomDataSource(e),n._entity=new ve.Entity,n.type=fe.getLayerType("heat"),n._state=ue.INITIALIZED,n}return t=o,(n=[{key:"_addedHook",value:function(){this._reDraw(),this._viewer.on(pe.CAMERA_MOVE_END,this._reset,this)}},{key:"_removedHook",value:function(){this._viewer.off(pe.CAMERA_MOVE_END,this._reset,this)}},{key:"_initContainer",value:function(){}},{key:"_transformWGS84ToHeatmap",value:function(e){e=he.transformWGS84ToMercator(e);var t={};return t.x=Math.round((e.lng-this._mBounds.west)/this._scale+this._options.spacing),t.y=Math.round((e.lat-this._mBounds.south)/this._scale+this._options.spacing),t.y=this._heat._renderer.canvas.height-t.y,t}},{key:"_getMBounds",value:function(){var e=he.transformWGS84ToMercator(new de(this._bounds.west,this._bounds.south)),t=he.transformWGS84ToMercator(new de(this._bounds.east,this._bounds.north));return{west:e.lng,south:e.lat,east:t.lng,north:t.lat}}},{key:"_initCanvas",value:function(){var e=Math.abs(this._mBounds.east-this._mBounds.west),t=Math.abs(this._mBounds.north-this._mBounds.south),n=Math.max(e,t),r=Math.min(e,t),i=1;n>this._options.maxCanvasSize?r/(i=n/this._options.maxCanvasSize)<this._options.minCanvasSize&&(i=r/this._options.minCanvasSize):r<this._options.minCanvasSize&&n/(i=r/this._options.minCanvasSize)>this._options.maxCanvasSize&&(i=n/this._options.maxCanvasSize),this._scale=i,this._options.container||(this._options.container=me.create("div","heat-map",document.getElementsByClassName("dc-container")[0])),this._options.container.style.cssText="\n    width:".concat(e/this._scale,"px;\n    height:").concat(t/this._scale,"px;\n    margin:0;\n    display:none"),this._heat?this._heat.configure(this._options):this._heat=_e.create(this._options)}},{key:"_initEntity",value:function(){var e=this._options.spacing*this._scale;this._mBounds.west-=e,this._mBounds.south-=e,this._mBounds.east+=e,this._mBounds.north+=e;var t=he.transformMercatorToWGS84({lng:this._mBounds.west,lat:this._mBounds.south}),n=he.transformMercatorToWGS84({lng:this._mBounds.east,lat:this._mBounds.north}),r=ve.Rectangle.fromDegrees(t.lng,t.lat,n.lng,n.lat);this._entity.show=!1,this._entity.rectangle={coordinates:r,fill:!1,distanceDisplayCondition:this._options.distanceDisplayCondition},this._delegate.entities.add(this._entity)}},{key:"_reset",value:function(){var e=1e4/Math.floor(this._viewer.camera.positionCartographic.height)*60;e<10&&(e=10),e>60&&(e=60),this._options.radius=e,this._options.spacing=1.5*this._options.radius,this._heat&&this._heat.configure(this._options)}},{key:"_reDraw",value:function(){var e=this;if(!this._bounds)return!1;var t=this._getMBounds();this._mBounds&&t.west===this._mBounds.west&&t.south===this._mBounds.south&&t.east===this._mBounds.east&&t.north===this._mBounds.north||(this._mBounds=t,this._initCanvas());var n=[];this._positions.forEach((function(t){var r=e._transformWGS84ToHeatmap({lng:t.lng||t.x,lat:t.lat||t.y});n.push({x:r.x,y:r.y,value:t.value||1})})),this._heat.setData({min:0,max:1,data:n}),this._delegate.entities.remove(this._entity),this._initEntity();var r=new ve.ImageMaterialProperty({image:this._heat._renderer.canvas,transparent:!0});ye.merge(this._entity.rectangle,{fill:!0,material:r}),this._entity.show=!0}},{key:"setPositions",value:function(e){return e&&Array.isArray(e)?(this._positions=e,this._bounds=ve.Math.bounds(this._positions),this._reDraw(),this):this}},{key:"addPosition",value:function(e){return this._positions.push(e),this._bounds=ve.Math.bounds(this._positions),this._reDraw(),this}},{key:"setOptions",value:function(e){return ye.merge(this._options,e),this._heat&&(this._options.spacing=1.5*this._options.radius,this._heat.configure(this._options)),this}},{key:"options",get:function(){return this._options}}])&&ie(t.prototype,n),r&&ie(t,r),o}(fe);fe.registerType("heat");var Ce=be;function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Me(e);if(t){var i=Me(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=DC,Oe=Te.Layer,Pe=Te.State,Se=DC.Namespace.Cesium,Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(o,e);var t,n,r,i=De(o);function o(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(we(this,o),!t)throw new Error("KmlLayer: the url is empty");return(n=i.call(this,e))._delegate=Se.KmlDataSource.load(t,r),n.type=Oe.getLayerType("kml"),n._state=Pe.INITIALIZED,n}return t=o,(n=[{key:"eachOverlay",value:function(e,t){if(this._delegate)return this._delegate.then((function(n){n.entities.values.forEach((function(n){e.call(t,n)}))})),this}},{key:"show",set:function(e){var t=this;this._show=e,this._delegate&&this._delegate.then((function(e){e.show=t._show}))},get:function(){return this._show}}])&&Ae(t.prototype,n),r&&Ae(t,r),o}(Oe);Oe.registerType("kml");var je=Ee;function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=We(e);if(t){var i=We(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ge(this,n)}}function Ge(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe=DC,Ve=Fe.Layer,Ze=Fe.State,He=Fe.MapvDataSet,Je=DC.Namespace.mapv,Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(o,e);var t,n,r,i=Be(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Re(this,o),!Je)throw new Error("MapvLayermiss mapv lib");return(t=i.call(this,e))._option=n,t._dataSet=void 0,t._delegate=void 0,t.type=Ve.getLayerType("mapv"),t}return t=o,(n=[{key:"_addHandler",value:function(e){this._viewer=e,this._delegate=new Je.cesiumMapLayer(this._viewer.delegate,this._dataSet||new He([]),this._option),e.delegate.scene.canvas.setAttribute("tabIndex",0),this._state=Ze.ADDED}},{key:"_removeHandler",value:function(){this._delegate&&this._delegate.remove(),this._state=Ze.REMOVED}},{key:"setDataSet",value:function(e){this._dataSet=e,this._delegate&&this._delegate.update({data:this._dataSet,option:this._option})}},{key:"show",set:function(e){this._show=e,this._delegate&&(this._show?this._delegate.show():this._delegate.hide())},get:function(){return this._show}}])&&Ne(t.prototype,n),r&&Ne(t,r),o}(Ve);Ve.registerType("mapv");var Ue=Ye,qe=n(0),Qe={ADD:"add",REMOVE:"remove"};function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var i=nt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt=DC.Event,it=DC.Namespace.Cesium,ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(o,e);var t,n,r,i=et(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this)}return t=o,(n=[{key:"_registerEvent",value:function(){var e=this;Object.keys(Qe).forEach((function(t){var n=Qe[t];e._cache[n]=new it.Event}))}}])&&Ke(t.prototype,n),r&&Ke(t,r),o}(rt),at={};function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ct=DC,lt=ct.Util,ut=ct.State,ft=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t||lt.uuid(),this._viewer=void 0,this._delegate=void 0,this._state=void 0,this._addable=!1,this._effectEvent=new ot,this.type=void 0,this.on(Qe.ADD,this._addHandler,this),this.on(Qe.REMOVE,this._removeHandler,this)}var t,n,r;return t=e,r=[{key:"registerType",value:function(e){e&&(at[e.toLocaleUpperCase()]=e.toLocaleLowerCase())}},{key:"getEffectType",value:function(e){return at[e.toLocaleUpperCase()]||void 0}}],(n=[{key:"_mountedHook",value:function(){}},{key:"_addedHook",value:function(){}},{key:"_removedHook",value:function(){}},{key:"_addHandler",value:function(e){this._viewer=e,this._mountedHook&&this._mountedHook(),this._delegate&&this._addable&&this._viewer.delegate.scene.postProcessStages.add(this._delegate),this._addedHook&&this._addedHook(),this._state=ut.ADDED}},{key:"_removeHandler",value:function(){this._viewer&&this._delegate&&this._addable&&(this._viewer.delegate.scene.postProcessStages.remove(this._delegate),this._delegate=void 0),this._removedHook&&this._removedHook(),this._state=ut.REMOVED}},{key:"addTo",value:function(e){return e&&e.addEffect&&e.addEffect(this),this}},{key:"on",value:function(e,t,n){return this._effectEvent.on(e,t,n||this),this}},{key:"off",value:function(e,t,n){return this._effectEvent.off(e,t,n||this),this}},{key:"fire",value:function(e,t){return this._effectEvent.fire(e,t),this}},{key:"id",get:function(){return this._id}},{key:"effectEvent",get:function(){return this._effectEvent}}])&&st(t.prototype,n),r&&st(t,r),e}();function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vt(e);if(t){var i=vt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yt(this,n)}}function yt(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t=DC.State,gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(o,e);var t,n,r,i=mt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e))._contrast=128,t._brightness=-.3,t._glowOnly=!1,t._delta=1,t._sigma=2,t._stepSize=1,t.type=ft.getEffectType("bloom"),t._state=_t.INITIALIZED,t}return t=o,(n=[{key:"_mountedHook",value:function(){this._delegate=this._viewer.delegate.scene.postProcessStages.bloom,this._delegate.enabled=!0,this.contrast=this._contrast,this.brightness=this._brightness,this.glowOnly=this._glowOnly,this.delta=this._delta,this.sigma=this._sigma,this.stepSize=this._stepSize}},{key:"_removedHook",value:function(){this._delegate&&(this._delegate.enabled=!1,this.delegate=void 0)}},{key:"contrast",set:function(e){this._contrast=e,this._delegate&&(this._delegate.uniforms.contrast=this._contrast)}},{key:"brightness",set:function(e){this._brightness=e,this._delegate&&(this._delegate.uniforms.brightness=this._brightness)}},{key:"glowOnly",set:function(e){this._glowOnly=e,this._delegate&&(this._delegate.uniforms.glowOnly=this._glowOnly)}},{key:"delta",set:function(e){this._delta=e,this._delegate&&(this._delegate.uniforms.delta=this._delta)}},{key:"sigma",set:function(e){this._sigma=e,this._delegate&&(this._delegate.uniforms.sigma=this._sigma)}},{key:"stepSize",set:function(e){this._stepSize=e,this._delegate&&(this._delegate.uniforms.stepSize=this._stepSize)}}])&&ht(t.prototype,n),r&&ht(t,r),o}(ft);ft.registerType("bloom");var bt=gt;function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dt(e);if(t){var i=Dt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zt(this,n)}}function zt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var It=DC,Mt=It.State,Tt=It.Util,Ot=It.Transform,Pt=It.Position,St=DC.Namespace.Cesium,Et=n(34),jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(o,e);var t,n,r,i=At(o);function o(e,t,n,r,a){var s;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),!Tt.checkPosition(t))throw new Error("CircleScanEffect: the position invalid");return(s=i.call(this,e))._position=t,s._radius=n||0,s._color=St.defaultValue(r,St.Color.RED),s._duration=1e3*St.defaultValue(a,1),s._addable=!0,s.type=ft.getEffectType("circle_scan"),s._state=Mt.INITIALIZED,s}return t=o,(n=[{key:"_mountedHook",value:function(){var e=this,t=Ot.transformWGS84ToCartesian(this._position),n=new St.Cartesian4(t.x,t.y,t.z,1),r=Ot.transformWGS84ToCartesian(new Pt(this._position.lng,this._position.lat,this._position.alt+500)),i=new St.Cartesian4(r.x,r.y,r.z,1),o=(new Date).getTime();this._delegate=new St.PostProcessStage({name:this._id,fragmentShader:Et,uniforms:{u_scanCenterEC:function(){return St.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,new St.Cartesian4)},u_scanPlaneNormalEC:function(){var t=St.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,new St.Cartesian4),r=St.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,i,new St.Cartesian4),o=new St.Cartesian3;return o.x=r.x-t.x,o.y=r.y-t.y,o.z=r.z-t.z,St.Cartesian3.normalize(o,o),o},u_radius:function(){return e._radius*(((new Date).getTime()-o)%e._duration)/e._duration},u_scanColor:this._color}})}}])&&xt(t.prototype,n),r&&xt(t,r),o}(ft);ft.registerType("circle_scan");var kt=jt;function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ft(e);if(t){var i=Ft(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Wt(this,n)}}function Wt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vt=DC.State,Zt=DC.Namespace.Cesium,Ht=n(35),Jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(o,e);var t,n,r,i=Gt(o);function o(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Nt(this,o),(n=i.call(this,e))._trength=r||1,n._color=t||new Zt.Color(.8,.8,.8,.5),n._addable=!0,n.type=ft.getEffectType("fog"),n._state=Vt.INITIALIZED,n}return t=o,(n=[{key:"_mountedHook",value:function(){var e=this;this._delegate=new Zt.PostProcessStage({name:this._id,fragmentShader:Ht,uniforms:{trength:function(){return e._trength},fogcolor:function(){return e._color}}})}}])&&Lt(t.prototype,n),r&&Lt(t,r),o}(ft);ft.registerType("fog");var Yt=Jt;function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$t(e);if(t){var i=$t(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kt(this,n)}}function Kt(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var en=DC,tn=en.Util,nn=en.State,rn=en.Transform,on=en.Position,an=DC.Namespace.Cesium,sn=n(36),cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(o,e);var t,n,r,i=Xt(o);function o(e,t,n,r,a){var s;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),!tn.checkPosition(t))throw new Error("the position invalid");return(s=i.call(this,e))._position=t,s._radius=n||0,s._color=an.defaultValue(r,an.Color.RED),s._duration=1e3*an.defaultValue(a,1),s._addable=!0,s.type=ft.getEffectType("radar_scan"),s._state=nn.INITIALIZED,s}return t=o,(n=[{key:"_mountedHook",value:function(){var e=this,t=rn.transformWGS84ToCartesian(this._position),n=new an.Cartesian4(t.x,t.y,t.z,1),r=rn.transformWGS84ToCartesian(new on(this._position.lng,this._position.lat,this._position.alt+500)),i=new an.Cartesian4(r.x,r.y,r.z,1),o=rn.transformWGS84ToCartesian(new on(this._position.lng+.001,this._position.lat,this._position.alt)),a=new an.Cartesian4(o.x,o.y,o.z,1),s=(new Date).getTime(),c=new an.Quaternion,l=new an.Matrix3,u=new an.Cartesian4,f=new an.Cartesian4,p=new an.Cartesian4,h=new an.Cartesian3,d=new an.Cartesian3;this._delegate=new an.PostProcessStage({name:this._id,fragmentShader:sn,uniforms:{u_scanCenterEC:function(){return an.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,u)},u_scanPlaneNormalEC:function(){var t=an.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,u),r=an.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,i,f);return h.x=r.x-t.x,h.y=r.y-t.y,h.z=r.z-t.z,an.Cartesian3.normalize(h,h),h},u_scanLineNormalEC:function(){var t=an.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,u),r=an.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,i,f),o=an.Matrix4.multiplyByVector(viewer.camera._viewMatrix,a,p);h.x=r.x-t.x,h.y=r.y-t.y,h.z=r.z-t.z,an.Cartesian3.normalize(h,h),d.x=o.x-t.x,d.y=o.y-t.y,d.z=o.z-t.z;var m=((new Date).getTime()-s)%e._duration/e._duration;return an.Quaternion.fromAxisAngle(h,m*an.Math.PI*2,c),an.Matrix3.fromQuaternion(c,l),an.Matrix3.multiplyByVector(l,d,d),an.Cartesian3.normalize(d,d),d},u_radius:this._radius,u_scanColor:this._color}})}}])&&qt(t.prototype,n),r&&qt(t,r),o}(ft);ft.registerType("radar_scan");var ln=cn;function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mn(e);if(t){var i=mn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dn(this,n)}}function dn(e,t){return!t||"object"!==un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yn=DC.State,vn=DC.Namespace.Cesium,_n=n(37),gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(o,e);var t,n,r,i=hn(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e))._addable=!0,t.type=ft.getEffectType("rain"),t._state=yn.INITIALIZED,t}return t=o,(n=[{key:"_mountedHook",value:function(){this._delegate=new vn.PostProcessStage({name:this._id,fragmentShader:_n})}}])&&fn(t.prototype,n),r&&fn(t,r),o}(ft);ft.registerType("rain");var bn=gn;function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dn(e);if(t){var i=Dn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zn(this,n)}}function zn(e,t){return!t||"object"!==Cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var In=DC.State,Mn=DC.Namespace.Cesium,Tn=n(38),On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(o,e);var t,n,r,i=An(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e))._addable=!0,t.type=ft.getEffectType("snow"),t._state=In.INITIALIZED,t}return t=o,(n=[{key:"_mountedHook",value:function(){this._delegate=new Mn.PostProcessStage({name:this._id,fragmentShader:Tn})}}])&&xn(t.prototype,n),r&&xn(t,r),o}(ft);ft.registerType("snow");var Pn={AroundView:l,AroundPoint:_,GlobeRotate:x,ClusterLayer:G,CzmlLayer:$,HeatLayer:Ce,KmlLayer:je,MapvLayer:Ue,Effect:ft,BloomEffect:bt,CircleScanEffect:kt,FogEffect:Yt,RadarScanEffect:ln,RainEffect:bn,SnowEffect:On,PolylineTrailMaterialProperty:qe.PolylineTrailMaterialProperty,PolylineFlowMaterialProperty:qe.PolylineFlowMaterialProperty,PolylineEmissionMaterialProperty:qe.PolylineEmissionMaterialProperty,WaterMaterialProperty:qe.WaterMaterialProperty,RimLightingMaterialProperty:qe.RimLightingMaterialProperty,CircleFadeMaterialProperty:qe.CircleFadeMaterialProperty,CircleWaveMaterialProperty:qe.CircleWaveMaterialProperty,WallTrailMaterialProperty:qe.WallTrailMaterialProperty};DC.mixin(Pn)}]);